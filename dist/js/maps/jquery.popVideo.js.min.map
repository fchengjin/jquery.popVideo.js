{"version":3,"sources":["jquery.popVideo.js"],"names":["$","PopVideo","element","options","this","$body","document","body","$element","popid","$wrapper","$control","$playbtn","video","$video","isOpen","isPlay","init","VERSION","DEFAULTS","playOnOpen","closeOnEnd","pauseOnClose","closeKey","title","duration","callback","onOpen","self","onClose","onPlay","onPause","onEnd","prototype","getDefaults","getOptions","extend","data","attr","Error","Math","random","getElementById","tpl","append","find","setVideo","click","e","target","close","on","pause","html","formatTime","getCurrentTime","percentage","css","volume","play","window","keyCode","preventDefault","p","parseInt","offsetX","width","setCurrentTime","setVolume","fullScreen","exitFullScreen","open","fadeIn","preventBubble","one","fadeOut","off","destroy","remove","currentTime","time","getVolume","round","requestMethod","requestFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullScreen","call","ActiveXObject","wscript","SendKeys","addClass","removeClass","exitMethod","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","exitFull","getVideo","currentSrc","length","hour","minute","second","old","fn","popVideo","option","$this","constructor","noConflict","jQuery"],"mappings":"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","file":"../jquery.popVideo.js","sourcesContent":["+function ($) {\r\n    'use strict';\r\n\r\n    // PopVideo CLASS DEFINITION\r\n    // ======================\r\n    var PopVideo = function (element, options) {\r\n        this.options = options\r\n        this.$body = $(document.body)\r\n        this.$element = $(element)\r\n        this.popid = null\r\n        this.$wrapper = null\r\n        this.$control = null\r\n        this.$playbtn = null\r\n        this.video = null\r\n        this.$video = null\r\n        this.isOpen = null\r\n        this.isPlay = null\r\n        var self = this\r\n        this.init(element, options)\r\n    }\r\n    PopVideo.VERSION = \"0.0.3\";\r\n    PopVideo.DEFAULTS = {\r\n        playOnOpen: false,\r\n        closeOnEnd: false,\r\n        pauseOnClose: true,\r\n        closeKey: 'esc', //(String || Boolean) 可选值 any，false,esc。其他值默认为esc\r\n        title: '',\r\n        video: '',//(String || Array)\r\n        duration: 300,\r\n        callback: {\r\n            onOpen: function (self) {\r\n                //窗口打开时\r\n            },\r\n            onClose: function (self) {\r\n                //窗口关闭时\r\n            },\r\n            onPlay: function (self) {\r\n                //视频播放时\r\n            },\r\n            onPause: function (self) {\r\n                //视频暂停\r\n            },\r\n            onEnd: function (self) {\r\n                //视频播放完毕\r\n            }\r\n        }\r\n    }\r\n    PopVideo.prototype.getDefaults = function () {\r\n        return PopVideo.DEFAULTS\r\n    }\r\n    PopVideo.prototype.getOptions = function (options) {\r\n        options = $.extend({}, this.getDefaults(), this.$element.data(), options)\r\n        return options\r\n    }\r\n    PopVideo.prototype.init = function (element, options) {\r\n        this.options = this.getOptions(options);\r\n        var video = !!this.options.video ? this.options.video : this.$element.attr('src');\r\n        if (!video) {\r\n            throw new Error('`video` option must be specified when initializing or the element must have the src attribute ')\r\n        } else {\r\n            this.video = video;\r\n        }\r\n        //生成一个随机5位数，作为id\r\n        var popid = 'popid-'\r\n        do popid += ~~(Math.random() * 100000)\r\n        while (document.getElementById(popid))\r\n        this.popid = popid\r\n        //自定义控制界面\r\n        var control = \" <svg class=\\\"popvideo_svg_sprite\\\" display=\\\"none\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n\" +\r\n            \"            <symbol id=\\\"popvideo_svg_play\\\" viewBox=\\\"0 0 36 36\\\">\\n\" +\r\n            \"                <path d=\\\"M25.8 18c0 .6-.3 1.1-.8 1.3L12.5 27c-.2.1-.5.2-.8.2-.8 0-1.5-.6-1.5-1.5V10c0-.8.7-1.5 1.5-1.5.3 0 .5.1.8.2l12.7 7.9c.4.5.6.9.6 1.4z\\\"></path>\\n\" +\r\n            \"            </symbol>\\n\" +\r\n            \"            <symbol id=\\\"popvideo_svg_replay\\\" viewBox=\\\"0 0 36 36\\\">\\n\" +\r\n            \"                <path d=\\\"M17.9 28c-4.9 0-9-3.6-9.8-8.3V19.4c0-.8.7-1.4 1.5-1.4s1.5.6 1.5 1.4c.8 3.8 4.5 6.2 8.3 5.4s6.2-4.5 5.4-8.3c-.7-3.2-3.5-5.6-6.9-5.6-1.8 0-3.6.7-4.8 2h1.3c.8 0 1.5.7 1.5 1.5s-.6 1.6-1.5 1.6h-4c-.8 0-1.5-.7-1.5-1.5v-4c0-.8.7-1.5 1.5-1.5.7 0 1.2.5 1.4 1.1C13.6 8.7 15.7 8 17.9 8c5.5 0 10 4.5 10 10s-4.4 10-10 10z\\\"></path>\\n\" +\r\n            \"            </symbol>\\n\" +\r\n            \"            <symbol id=\\\"popvideo_svg_pause\\\" viewBox=\\\"0 0 36 36\\\">\\n\" +\r\n            \"                <path d=\\\"M23.5 28c-.8 0-1.5-.7-1.5-1.5v-17c0-.8.7-1.5 1.5-1.5s1.5.7 1.5 1.5v17c0 .8-.7 1.5-1.5 1.5zm-11 0c-.8 0-1.5-.7-1.5-1.5v-17c0-.8.7-1.5 1.5-1.5s1.5.7 1.5 1.5v17c0 .8-.7 1.5-1.5 1.5z\\\"></path>\\n\" +\r\n            \"            </symbol>\\n\" +\r\n            \"            <symbol id=\\\"popvideo_svg_volume\\\" viewBox=\\\"0 0 20 20\\\">\\n\" +\r\n            \"                <path d=\\\"M16.714 15.593l-.01-.01a1 1 0 0 1-1.705-.708c0-.287.124-.542.317-.724C16.354 13.073 17 11.614 17 10s-.645-3.072-1.682-4.151A.993.993 0 0 1 15 5.125a1 1 0 0 1 1-1c.3 0 .561.139.744.348l.017-.016A7.969 7.969 0 0 1 19 10c0 2.178-.874 4.15-2.286 5.593zm-3.999 3.122a.956.956 0 0 1-.688.28c-.009 0-.018.005-.027.005a.984.984 0 0 1-.75-.357L5.818 15H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h3.818l5.432-3.643A.984.984 0 0 1 12 1c.009 0 .017.005.026.005a.954.954 0 0 1 .968.967c.001.01.006.018.006.028v16c0 .009-.005.017-.005.026a.959.959 0 0 1-.28.689zM6.75 6.643A.984.984 0 0 1 6 7H3v6h3c.304 0 .567.143.75.357l4.25 2.85V3.792L6.75 6.643z\\\"></path>\\n\" +\r\n            \"            </symbol>\\n\" +\r\n            \"            <symbol id=\\\"popvideo_svg_volume_mute\\\" viewBox=\\\"0 0 20 20\\\">\\n\" +\r\n            \"                <path d=\\\"M16.394 12.566A5.88 5.88 0 0 0 17 10a5.97 5.97 0 0 0-1.682-4.151.993.993 0 0 1-.318-.724 1 1 0 0 1 1-1c.3 0 .561.139.745.348l.016-.016A7.969 7.969 0 0 1 19 10a7.934 7.934 0 0 1-1.116 4.055l-1.49-1.489zM11 3.792L8.978 5.149 7.62 3.792l3.63-2.435A.984.984 0 0 1 12 1c.009 0 .017.005.026.005a.954.954 0 0 1 .968.967c.001.01.006.018.006.028v7.171l-2-2V3.792zm7.864 14.072a.999.999 0 0 1-1.414 0L2.136 2.55a1 1 0 1 1 1.415-1.415L18.864 16.45a1 1 0 0 1 0 1.414zM3.171 5l2 2H3v6h3c.304 0 .567.143.75.357l4.25 2.85v-3.379l2 2V18c0 .009-.005.017-.005.027a.955.955 0 0 1-.967.968c-.01 0-.019.005-.028.005a.984.984 0 0 1-.75-.357L5.818 15H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.171z\\\"></path>\\n\" +\r\n            \"            </symbol>\\n\" +\r\n            \"            <symbol id=\\\"popvideo_svg_fullscreen\\\" viewBox=\\\"0 0 24 24\\\">\\n\" +\r\n            \"                <path d=\\\"M19.7 19.7c-.2.2-.5.3-.7.3h-4c-.6 0-1-.4-1-1s.4-1 1-1h1.6l-3.3-3.3c-.4-.4-.3-1.1.1-1.4.4-.4 1-.4 1.4 0l3.3 3.3V15c0-.6.4-1 1-1s1 .4 1 1v4c-.1.2-.2.5-.4.7zM19 10c-.6 0-1-.4-1-1V7.4l-3.3 3.3c-.4.4-1 .4-1.4 0-.4-.4-.4-1 0-1.4L16.6 6H15c-.6 0-1-.4-1-1s.4-1 1-1h4c.3 0 .5.1.7.3.2.2.3.5.3.7v4c0 .6-.4 1-1 1zM7.4 18H9c.6 0 1 .4 1 1s-.4 1-1 1H5c-.3 0-.5-.1-.7-.3-.2-.2-.3-.5-.3-.7v-4c0-.6.4-1 1-1s1 .4 1 1v1.6l3.3-3.3c.4-.4 1.1-.3 1.4.1.4.4.4 1 0 1.4L7.4 18zm1.9-7.3L6 7.4V9c0 .6-.4 1-1 1s-1-.4-1-1V5c0-.3.1-.5.3-.7.2-.2.5-.3.7-.3h4c.6 0 1 .4 1 1s-.4 1-1 1H7.4l3.3 3.3c.4.4.4 1 0 1.4-.4.4-1 .4-1.4 0z\\\"></path>\\n\" +\r\n            \"            </symbol>\\n\" +\r\n            \"            <symbol id=\\\"popvideo_svg_fullscreen_true\\\" viewBox=\\\"0 0 24 24\\\">\\n\" +\r\n            \"                <path d=\\\"M16.4 9H18c.6 0 1 .4 1 1s-.4 1-1 1h-4c-.3 0-.5-.1-.7-.3-.2-.2-.3-.5-.3-.7V6c0-.6.4-1 1-1s1 .4 1 1v1.6l3.3-3.3c.4-.4 1.1-.3 1.4.1.4.4.4 1 0 1.4L16.4 9zM10 19c-.6 0-1-.4-1-1v-1.6l-3.3 3.3c-.4.4-1 .4-1.4 0-.4-.4-.4-1 0-1.4L7.6 15H6c-.6 0-1-.4-1-1s.4-1 1-1h4c.3 0 .5.1.7.3.2.2.3.5.3.7v4c0 .5-.4 1-1 1zm0-8H6c-.6 0-1-.4-1-1s.4-1 1-1h1.6L4.3 5.7c-.4-.4-.4-1 .1-1.4.4-.4 1-.4 1.4 0L9 7.6V6c0-.6.4-1 1-1s1 .4 1 1v4c0 .3-.1.5-.3.7-.2.2-.5.3-.7.3zm4 2h4c.6 0 1 .4 1 1s-.4 1-1 1h-1.6l3.3 3.3c.4.4.4 1 0 1.4s-1 .4-1.4 0L15 16.4V18c0 .6-.4 1-1 1s-1-.4-1-1v-4c0-.3.1-.5.3-.7.2-.2.5-.3.7-.3z\\\"></path>\\n\" +\r\n            \"            </symbol>\\n\" +\r\n            \"        </svg>\\n\" +\r\n            \"        <div data-role=\\\"popvideo-control-wrap\\\" class=\\\"popvideo-control-wrap\\\">\\n\" +\r\n            \"            <div class=\\\"popvideo_progress_bar_container\\\" data-role=\\\"popvideo-control-progress\\\">\\n\" +\r\n            \"                <div class=\\\"popvideo_progress_list\\\" data-role=\\\"popvideo-control-progress-list\\\">\\n\" +\r\n            \"                    <div class=\\\"popvideo_progress_load\\\"></div>\\n\" +\r\n            \"                    <div class=\\\"popvideo_progress_play\\\"></div>\\n\" +\r\n            \"                </div>\\n\" +\r\n            \"                <div class=\\\"popvideo_btn_scrubber\\\"><div class=\\\"popvideo_scrubber_indicator\\\"></div></div>\" +\r\n            \"            </div>\\n\" +\r\n            \"            <div class=\\\"popvideo_controls\\\">\\n\" +\r\n            \"                <div class=\\\"popvideo_left_controls\\\" data-role=\\\"popvideo-control-left\\\">\\n\" +\r\n            \"                    <div data-role=\\\"popvideo-ui-control-playbtn\\\" class=\\\"popvideo_btn popvideo_btn_play\\\"\\n\" +\r\n            \"                         data-status=\\\"play\\\">\\n\" +\r\n            \"                        <svg class=\\\"popvideo_icon popvideo_icon_play\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 36 36\\\">\\n\" +\r\n            \"                            <use class=\\\"popvideo_svg_symbol popvideo_svg_play\\\"\\n\" +\r\n            \"                                 xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n\" +\r\n            \"                                 xlink:href=\\\"#popvideo_svg_play\\\"></use>\\n\" +\r\n            \"                            <use class=\\\"popvideo_svg_symbol popvideo_svg_pause\\\"\\n\" +\r\n            \"                                 xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n\" +\r\n            \"                                 xlink:href=\\\"#popvideo_svg_pause\\\"></use>\\n\" +\r\n            \"                            <use class=\\\"popvideo_svg_symbol popvideo_svg_replay\\\"\\n\" +\r\n            \"                                 xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n\" +\r\n            \"                                 xlink:href=\\\"#popvideo_svg_replay\\\"></use>\\n\" +\r\n            \"                        </svg>\\n\" +\r\n            \"                    </div>\\n\" +\r\n            \"                    <div data-role=\\\"popvideo-control-time-mod\\\" class=\\\"popvideo_time_display\\\">\\n\" +\r\n            \"                        <div class=\\\"popvideo_time_current\\\" >00:00</div>\\n\" +\r\n            \"                        <div class=\\\"popvideo_time_separator\\\">/</div>\\n\" +\r\n            \"                        <div class=\\\"popvideo_time_duration\\\" >00:00</div>\\n\" +\r\n            \"                    </div>\\n\" +\r\n            \"                </div>\\n\" +\r\n            \"                <div class=\\\"popvideo_right_controls\\\" data-role=\\\"popvideo-control-right\\\">\\n\" +\r\n            \"                    <div class=\\\"popvideo_btn popvideo_btn_volume\\\" data-role=\\\"popvideo-control-volume-button\\\"\\n\" +\r\n            \"                         data-status=\\\"normal\\\">\\n\" +\r\n            \"                        <svg class=\\\"popvideo_icon popvideo_icon_volume\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 24 24\\\">\\n\" +\r\n            \"                            <use class=\\\"popvideo_svg_symbol popvideo_svg_volume\\\"\\n\" +\r\n            \"                                 xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n\" +\r\n            \"                                 xlink:href=\\\"#popvideo_svg_volume\\\"></use>\\n\" +\r\n            \"                            <use class=\\\"popvideo_svg_symbol popvideo_svg_volume_mute\\\"\\n\" +\r\n            \"                                 xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n\" +\r\n            \"                                 xlink:href=\\\"#popvideo_svg_volume_mute\\\"></use>\\n\" +\r\n            \"                        </svg>\\n\" +\r\n            \"                        <div class=\\\"popvideo_volume_range\\\">\\n\" +\r\n            \"                            <div class=\\\"popvideo_volume_range_current\\\" style=\\\"width: 50%;\\\">\\n\" +\r\n            \"                                <div class=\\\"popvideo_volume_handle\\\" style=\\\"left: 50%;\\\"></div>\\n\" +\r\n            \"                            </div>\\n\" +\r\n            \"                        </div>\\n\" +\r\n            \"                    </div>\\n\" +\r\n            \"                    <div class=\\\"popvideo_btn popvideo_btn_fullscreen\\\"\\n\" +\r\n            \"                         data-status=\\\"false\\\"\\n\" +\r\n            \"                         data-report=\\\"window-fullscreen\\\">\\n\" +\r\n            \"                        <svg class=\\\"popvideo_icon popvideo_icon_fullscreen\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 24 24\\\">\\n\" +\r\n            \"                            <use class=\\\"popvideo_svg_symbol popvideo_svg_fullscreen\\\"\\n\" +\r\n            \"                                 xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n\" +\r\n            \"                                 xlink:href=\\\"#popvideo_svg_fullscreen\\\"></use>\\n\" +\r\n            \"                            <use class=\\\"popvideo_svg_symbol popvideo_svg_fullscreen_true\\\"\\n\" +\r\n            \"                                 xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\\n\" +\r\n            \"                                 xlink:href=\\\"#popvideo_svg_fullscreen_true\\\"></use>\\n\" +\r\n            \"                        </svg>\\n\" +\r\n            \"                    </div>\\n\" +\r\n            \"                </div>\\n\" +\r\n            \"            </div>\\n\" +\r\n            \"        </div>\";\r\n        var tpl = '<div class=\"popvideo-wrapper\" id=\"' + popid + '\">' +\r\n            '<div class=\"popvideo\">' +\r\n            '<div class=\"popvideo-head\"><a href=\"javascript:void(0)\" class=\"popvideo-close\">&times;</a><h4 class=\"popvideo-title\">' + this.options.title + '</h4></div>' +\r\n            '<div class=\"popvideo-content\">' + '<video webkit-playsinline=\"true\"></video></div>' +\r\n            control +\r\n            '</div></div>';\r\n        $('body').append(tpl);\r\n        this.$wrapper = $('#' + popid);\r\n        this.$video = this.$wrapper.find('video');\r\n        this.$playbtn = this.$wrapper.find('.popvideo_btn_play');\r\n        this.$control = this.$wrapper.find('.popvideo-control-wrap');\r\n        this.setVideo(video);\r\n        // 为x添加close事件\r\n        var self = this;\r\n        this.$wrapper.click(function (e) {\r\n            if (e.target === this) {\r\n                self.close();\r\n            }\r\n        });\r\n        this.$wrapper.find('.popvideo-close').on('click.popvideo.close', function () {\r\n            self.close();\r\n        });\r\n        //视频播放完毕事件\r\n        this.$video.on('ended.popvideo', function (e) {\r\n            self.options.callback.onEnd(self);\r\n            self.pause();\r\n            if (self.options.closeOnEnd) {\r\n                self.close();\r\n            }\r\n        });\r\n        // 视频播放时间改变时\r\n        this.$video.on('timeupdate', function () {\r\n            self.$control.find('.popvideo_time_current').html(formatTime(self.getCurrentTime()));\r\n            // 更新进度条\r\n            var percentage = self.getCurrentTime() / self.duration * 100 + \"%\";\r\n            self.$control.find('.popvideo_progress_play').css('width', percentage);\r\n            self.$control.find('.popvideo_btn_scrubber').css('left', percentage);\r\n        });\r\n        //当元数据（比如分辨率和时长）被加载时运行的脚本。\r\n        this.$video.on('loadedmetadata', function (e) {\r\n            var duration = self.duration = this.duration;\r\n            self.$control.find('.popvideo_time_duration').html(formatTime(duration));\r\n        });\r\n        //音量改变时\r\n        this.$video.on('volumechange', function (e) {\r\n            var volume = self.volume = this.volume * 100;\r\n            if (volume < 1) {\r\n                self.$control.find('.popvideo_btn_volume').attr('data-status', 'mute');\r\n            } else {\r\n                self.$control.find('.popvideo_btn_volume').attr('data-status', 'normal');\r\n            }\r\n            self.$control.find('.popvideo_volume_range_current').css('width', volume + \"%\");\r\n            self.$control.find('.popvideo_volume_handle').css('left', volume + \"%\");\r\n        });\r\n        //播放按钮事件\r\n        this.$playbtn.on('click.popvideo.play', function () {\r\n            var $playbtn = $(this);\r\n            switch ($playbtn.attr('data-status')) {\r\n                case 'play':\r\n                    self.play();\r\n                    break;\r\n                case 'pause':\r\n                    self.pause();\r\n                    break;\r\n                default:\r\n                    self.play();\r\n                    break;\r\n            }\r\n        })\r\n        //空格控制播放\r\n        $(window).on('keyup.space', function (e) {\r\n            if (e.keyCode === 32 && self.isOpen) {\r\n                if (self.isPlay) {\r\n                    self.pause();\r\n                } else {\r\n                    self.play();\r\n                }\r\n            }\r\n        });\r\n        //进度条点击事件\r\n        this.$control.find('.popvideo_progress_bar_container').on('click.progress', function (e) {\r\n            e.preventDefault();\r\n            var p = parseInt(self.duration * e.offsetX / $(this).width());\r\n            self.setCurrentTime(p);\r\n        });\r\n        //声音控制界面点击事件\r\n        this.$control.find('.popvideo_volume_range').click(function (e) {\r\n            e.preventDefault();\r\n            if (e.target === $(this).find('.popvideo_volume_handle')[0]) {\r\n                return false;\r\n            }\r\n            var volume = ~~(e.offsetX / $(this).width() * 100);\r\n            self.setVolume(volume);\r\n        });\r\n        this.$control.find('.popvideo_btn_volume').click(function (e) {\r\n            if (e.target === $(this).find('.popvideo_icon_volume')[0]) {\r\n                switch ($(this).attr('data-status')) {\r\n                    case \"mute\":\r\n                        self.setVolume(50);\r\n                        break;\r\n                    case \"normal\":\r\n                        self.setVolume(0);\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n        })\r\n        //全屏\r\n        this.$control.find('.popvideo_btn_fullscreen').click(function () {\r\n            switch ($(this).attr('data-status')) {\r\n                case \"false\":\r\n                    self.fullScreen();\r\n                    break;\r\n                case \"true\":\r\n                    self.exitFullScreen();\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        })\r\n    };\r\n    PopVideo.prototype.open = function () {\r\n        $('body').css('overflow', 'hidden');\r\n        this.$wrapper.fadeIn(this.options.duration).on('scroll.popvideo', function (e) {\r\n            e.preventBubble();\r\n        });\r\n        if (this.options.playOnOpen) {\r\n            this.play();\r\n        }\r\n        var self = this;\r\n        if (this.options.closeKey) {\r\n            var key = this.options.closeKey;\r\n            switch (key) {\r\n                case 'any':\r\n                    $(window).one('keyup.closeKey', function (e) {\r\n                        if (e.keyCode) {\r\n                            self.close();\r\n                        }\r\n                    });\r\n                    break;\r\n                case 'esc':\r\n                    $(window).one('keyup.closeKey', function (e) {\r\n                        if (e.keyCode === 27) {\r\n                            self.close();\r\n                        }\r\n                    });\r\n                    break;\r\n                case false:\r\n                    break;\r\n                default:\r\n                    $(window).one('keyup.closeKey', function (e) {\r\n                        if (e.keyCode === 27) {\r\n                            self.close();\r\n                        }\r\n                    });\r\n                    break;\r\n            }\r\n        }\r\n        this.isOpen = true;\r\n        //打开后回调onOpen函数\r\n        this.options.callback.onOpen(this);\r\n    };\r\n    PopVideo.prototype.play = function () {\r\n        this.$video[0].play();\r\n        // 改变播放按钮状态\r\n        this.$playbtn.attr('data-status', 'pause');\r\n        this.isPlay = true;\r\n        this.options.callback.onPlay(this);\r\n    }\r\n    PopVideo.prototype.pause = function () {\r\n        this.$video[0].pause();\r\n        this.$playbtn.attr('data-status', 'play');\r\n        this.isPlay = false;\r\n        this.options.callback.onPause(this);\r\n    };\r\n    PopVideo.prototype.close = function () {\r\n        $('body').css('overflow', 'auto');\r\n        this.$wrapper.fadeOut(this.options.duration).off('scroll.popvideo');\r\n        if (this.options.pauseOnClose) {\r\n            this.pause();\r\n        }\r\n        this.isOpen = false;\r\n        this.options.callback.onClose(this);\r\n    };\r\n    PopVideo.prototype.destroy = function () {\r\n        this.$wrapper.remove();\r\n    };\r\n    PopVideo.prototype.getCurrentTime = function () {\r\n        return this.$video[0].currentTime\r\n    };\r\n    PopVideo.prototype.setCurrentTime = function (time) {\r\n        // todo 添加缓冲页面\r\n        this.$video[0].currentTime = time;\r\n    };\r\n// 声音控制\r\n    PopVideo.prototype.getVolume = function () {\r\n        return Math.round(this.$video[0].volume * 100);\r\n    };\r\n    PopVideo.prototype.setVolume = function (volume) {\r\n        this.$video[0].volume = volume / 100 < 0.06 ? 0 : (volume / 100 > 0.94 ? 1 : volume / 100);\r\n    }\r\n    PopVideo.prototype.fullScreen = function () {\r\n        requestFullScreen(this.$wrapper.find('.popvideo')[0])\r\n        this.$control.find('.popvideo_btn_fullscreen').attr('data-status', 'true')\r\n        this.$wrapper.find('.popvideo').addClass('popvideo-fullscreen')\r\n\r\n    }\r\n    PopVideo.prototype.exitFullScreen = function () {\r\n        this.$control.find('.popvideo_btn_fullscreen').attr('data-status', 'false');\r\n        this.$wrapper.find('.popvideo').removeClass('popvideo-fullscreen')\r\n        exitFull();\r\n    }\r\n    PopVideo.prototype.getVideo = function () {\r\n        return this.$video[0].currentSrc;\r\n    }\r\n    PopVideo.prototype.setVideo = function (video) {\r\n        this.$video.attr('src', video);\r\n    };\r\n\r\n    // PopVideo PLUGIN DEFINITION\r\n    // ===========================\r\n    var formatTime = function (length) {\r\n        if (typeof length !== \"number\") {\r\n            return false\r\n        }\r\n        var hour = parseInt(length / (60 * 60));\r\n        hour = hour > 9 ? hour : \"0\" + hour;\r\n        var minute = parseInt(length / 60) % 60;\r\n        minute = minute > 9 ? minute : \"0\" + minute;\r\n        var second = parseInt(length % 60);\r\n        second = second > 9 ? second : \"0\" + second;\r\n        return hour === \"00\" ? minute + \":\" + second : hour + \":\" + minute + \":\" + second;\r\n    }\r\n\r\n    function Plugin(option) {\r\n        // return this.each(function () {\r\n        //     var $this = $(this)\r\n        //     var data = $this.data('PopVideo')\r\n        //     if (!data) $this.data('PopVideo', (data = new PopVideo(this, option)))\r\n        //     if (typeof option == 'string') data[option]()\r\n        // })\r\n        var $this = $(this)\r\n        var data = $this.data('PopVideo')\r\n        if (!data) $this.data('PopVideo', (data = new PopVideo(this, option)))\r\n        if (typeof option === 'string') data[option]()\r\n        return data;\r\n    }\r\n\r\n    function requestFullScreen(element) {\r\n        // 判断各种浏览器，找到正确的方法\r\n        var requestMethod = element.requestFullScreen || //W3C\r\n            element.webkitRequestFullScreen ||    //Chrome等\r\n            element.mozRequestFullScreen || //FireFox\r\n            element.msRequestFullScreen; //IE11\r\n        if (requestMethod) {\r\n            requestMethod.call(element);\r\n        }\r\n        else if (typeof window.ActiveXObject !== \"undefined\") {//for Internet Explorer\r\n            var wscript = new ActiveXObject(\"WScript.Shell\");\r\n            if (wscript !== null) {\r\n                wscript.SendKeys(\"{F11}\");\r\n            }\r\n        }\r\n    }\r\n\r\n    //退出全屏 判断浏览器种类\r\n    function exitFull() {\r\n        // 判断各种浏览器，找到正确的方法\r\n        var exitMethod = document.exitFullscreen || //W3C\r\n            document.mozCancelFullScreen ||    //Chrome等\r\n            document.webkitExitFullscreen || //FireFox\r\n            document.webkitExitFullscreen; //IE11\r\n        if (exitMethod) {\r\n            exitMethod.call(document);\r\n        }\r\n        else if (typeof window.ActiveXObject !== \"undefined\") {//for Internet Explorer\r\n            var wscript = new ActiveXObject(\"WScript.Shell\");\r\n            if (wscript !== null) {\r\n                wscript.SendKeys(\"{F11}\");\r\n            }\r\n        }\r\n    }\r\n\r\n    var old = $.fn.popVideo\r\n\r\n    $.fn.popVideo = Plugin\r\n    $.fn.popVideo.constructor = PopVideo\r\n\r\n\r\n    // PopVideo NO CONFLICT\r\n    // =====================\r\n\r\n    $.fn.popVideo.noConflict = function () {\r\n        $.fn.popVideo = old\r\n        return this\r\n    }\r\n\r\n}(jQuery);"]}