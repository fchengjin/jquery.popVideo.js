+function(o){"use strict";var t=function(t,i){this.options=i,this.$body=o(document.body),this.$element=o(t),this.popid=null,this.$wrapper=null,this.video=null,this.$video=null;var e=this;this.isOpen=!1,this.init(t,i),this.isPlay=function(){return!e.$video[0].paused},this.isLoop=function(){return!!e.$video.attr("loop")}};t.VERSION="0.0.3",t.DEFAULTS={playOnOpen:!1,closeOnEnd:!1,pauseOnClose:!0,loop:!1,closeKey:"esc",title:"",video:"",duration:300,callback:{onOpen:function(){},onClose:function(){},onPlay:function(){},onPause:function(){},onEnd:function(){}}},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=o.extend({},this.getDefaults(),this.$element.data(),t)},t.prototype.init=function(t,i){this.options=this.getOptions(i);var e=this.options.video?this.options.video:this.$element.attr("src");if(!e)throw new Error("`video` option must be specified when initializing or the element must have the src attribute ");this.video=e;var n=this.options.loop?"loop":"",s="popid-";do{s+=~~(1e5*Math.random())}while(document.getElementById(s));this.popid=s;var p='<div class="popvideo-wrapper" id="'+s+'"><div class="popvideo"><div class="popvideo-head"><a href="javascript:void(0)" class="popvideo-close">&times;</a><h3 class="popvideo-title">'+this.options.title+'</h3></div><div class="popvideo-content"><video controls '+n+"></video></div></div></div>";o("body").append(p),this.$wrapper=o("#"+s),this.$video=this.$wrapper.find("video"),this.setVideo(e);var d=this;this.$wrapper.find(".popvideo-close").on("click.popvideo.close",function(){d.close()}),this.options.closeOnEnd&&d.$video.on("ended.close",function(){d.close()})},t.prototype.open=function(){o("body").css("overflow","hidden"),this.$wrapper.fadeIn(this.options.duration).on("scroll.popvideo",function(o){o.preventBubble()}),this.options.playOnOpen&&this.play();var t=this;if(this.options.closeKey)switch(this.options.closeKey){case"any":o(window).one("keyup.closeKey",function(o){o.keyCode&&t.close()});break;case"esc":default:o(window).one("keyup.closeKey",function(o){27===o.keyCode&&t.close()})}this.isOpen=!0,this.options.callback.onOpen()},t.prototype.play=function(){this.$video[0].play()},t.prototype.pause=function(){this.$video[0].pause()},t.prototype.close=function(){o("body").css("overflow","auto"),this.$wrapper.fadeOut(this.options.duration).off("scroll.popvideo"),this.options.pauseOnClose&&this.pause(),this.isOpen=!1},t.prototype.destroy=function(){this.$body.remove(this.$wrapper)},t.prototype.setVideo=function(o){this.$video.attr("src",o)};var i=o.fn.popVideo;o.fn.popVideo=function(i){var e=o(this),n=e.data("PopVideo");return n||e.data("PopVideo",n=new t(this,i)),"string"==typeof i&&n[i](),n},o.fn.popVideo.Constructor=t,o.fn.popVideo.noConflict=function(){return o.fn.popVideo=i,this}}(jQuery);
//# sourceMappingURL=maps/jquery.popVideo.js.map
